@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix core: <http://provchain.org/core#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix prov: <http://www.w3.org/ns/prov#> .

# SHACL shapes for traceability ontology

# Shape for Batch
core:BatchShape
    a sh:NodeShape ;
    sh:targetClass core:Batch ;
    sh:property [
        sh:path core:hasIdentifier ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "identifier" ;
        sh:description "A unique identifier for the batch" ;
    ] ;
    sh:property [
        sh:path core:producedAt ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "production timestamp" ;
        sh:description "When the batch was produced" ;
    ] ;
    sh:property [
        sh:path prov:wasAttributedTo ;
        sh:minCount 1 ;
        sh:class core:Organization ;
        sh:name "attributed organization" ;
        sh:description "The organization responsible for producing the batch" ;
    ] .

# Shape for RawMaterial
core:RawMaterialShape
    a sh:NodeShape ;
    sh:targetClass core:RawMaterial ;
    sh:property [
        sh:path core:hasIdentifier ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "identifier" ;
        sh:description "A unique identifier for the raw material" ;
    ] ;
    sh:property [
        sh:path core:producedAt ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "production timestamp" ;
        sh:description "When the raw material was produced" ;
    ] ;
    sh:property [
        sh:path prov:wasAttributedTo ;
        sh:minCount 1 ;
        sh:class core:Organization ;
        sh:name "attributed organization" ;
        sh:description "The organization responsible for producing the raw material" ;
    ] .

# Shape for ManufacturingProcess
core:ManufacturingProcessShape
    a sh:NodeShape ;
    sh:targetClass core:ManufacturingProcess ;
    sh:property [
        sh:path core:recordedAt ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "recorded timestamp" ;
        sh:description "When the manufacturing process was recorded" ;
    ] ;
    sh:property [
        sh:path prov:wasAssociatedWith ;
        sh:minCount 1 ;
        sh:class core:Organization ;
        sh:name "associated organization" ;
        sh:description "The organization responsible for the manufacturing process" ;
    ] ;
    sh:property [
        sh:path prov:used ;
        sh:minCount 1 ;
        sh:class core:TraceableEntity ;
        sh:name "used entity" ;
        sh:description "The entity that was used in the manufacturing process" ;
    ] ;
    sh:property [
        sh:path prov:generated ;
        sh:minCount 1 ;
        sh:class core:Batch ;
        sh:name "generated batch" ;
        sh:description "The batch generated by the manufacturing process" ;
    ] .

# Shape for TransportProcess
core:TransportProcessShape
    a sh:NodeShape ;
    sh:targetClass core:TransportProcess ;
    sh:property [
        sh:path core:recordedAt ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "recorded timestamp" ;
        sh:description "When the transport process was recorded" ;
    ] ;
    sh:property [
        sh:path prov:wasAssociatedWith ;
        sh:minCount 1 ;
        sh:class core:Organization ;
        sh:name "associated organization" ;
        sh:description "The organization responsible for the transport process" ;
    ] ;
    sh:property [
        sh:path prov:used ;
        sh:minCount 1 ;
        sh:class core:TraceableEntity ;
        sh:name "transported entity" ;
        sh:description "The entity that was transported" ;
    ] ;
    sh:property [
        sh:path core:hasCondition ;
        sh:maxCount 1 ;
        sh:class core:EnvironmentalCondition ;
        sh:name "environmental condition" ;
        sh:description "Environmental conditions during transport" ;
    ] .

# Shape for QualityControlProcess
core:QualityControlProcessShape
    a sh:NodeShape ;
    sh:targetClass core:QualityControlProcess ;
    sh:property [
        sh:path core:recordedAt ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "recorded timestamp" ;
        sh:description "When the quality control process was recorded" ;
    ] ;
    sh:property [
        sh:path prov:wasAssociatedWith ;
        sh:minCount 1 ;
        sh:class core:Organization ;
        sh:name "associated organization" ;
        sh:description "The organization responsible for the quality control process" ;
    ] ;
    sh:property [
        sh:path prov:used ;
        sh:minCount 1 ;
        sh:class core:TraceableEntity ;
        sh:name "checked entity" ;
        sh:description "The entity that was checked" ;
    ] .

# Shape for EnvironmentalCondition
core:EnvironmentalConditionShape
    a sh:NodeShape ;
    sh:targetClass core:EnvironmentalCondition ;
    sh:property [
        sh:path core:hasTemperature ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:name "temperature" ;
        sh:description "Temperature in Celsius" ;
    ] ;
    sh:property [
        sh:path core:hasHumidity ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:name "humidity" ;
        sh:description "Relative humidity in percent" ;
    ] ;
    sh:property [
        sh:path core:hasConditionTimestamp ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "condition timestamp" ;
        sh:description "When the environmental condition was recorded" ;
    ] .

# Shape for Supplier
core:SupplierShape
    a sh:NodeShape ;
    sh:targetClass core:Supplier ;
    sh:property [
        sh:path rdfs:label ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "label" ;
        sh:description "Name or label of the supplier" ;
    ] .

# Shape for Manufacturer
core:ManufacturerShape
    a sh:NodeShape ;
    sh:targetClass core:Manufacturer ;
    sh:property [
        sh:path rdfs:label ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "label" ;
        sh:description "Name or label of the manufacturer" ;
    ] .

# Shape for LogisticsProvider
core:LogisticsProviderShape
    a sh:NodeShape ;
    sh:targetClass core:LogisticsProvider ;
    sh:property [
        sh:path rdfs:label ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "label" ;
        sh:description "Name or label of the logistics provider" ;
    ] .

# Shape for Retailer
core:RetailerShape
    a sh:NodeShape ;
    sh:targetClass core:Retailer ;
    sh:property [
        sh:path rdfs:label ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "label" ;
        sh:description "Name or label of the retailer" ;
    ] .

# Shape for Consumer
core:ConsumerShape
    a sh:NodeShape ;
    sh:targetClass core:Consumer ;
    sh:property [
        sh:path rdfs:label ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "label" ;
        sh:description "Name or label of the consumer" ;
    ] .
