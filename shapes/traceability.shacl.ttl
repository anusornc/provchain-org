@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix trace: <http://provchain.org/trace#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix prov: <http://www.w3.org/ns/prov#> .

# SHACL shapes for traceability ontology

# Shape for ProductBatch
trace:ProductBatchShape
    a sh:NodeShape ;
    sh:targetClass trace:ProductBatch ;
    sh:property [
        sh:path trace:hasBatchID ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "batch ID" ;
        sh:description "A unique identifier for the product batch" ;
    ] ;
    sh:property [
        sh:path trace:producedAt ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "production timestamp" ;
        sh:description "When the product batch was produced" ;
    ] ;
    sh:property [
        sh:path prov:wasAttributedTo ;
        sh:minCount 1 ;
        sh:class trace:TraceAgent ;
        sh:name "attributed agent" ;
        sh:description "The agent responsible for producing the batch" ;
    ] .

# Shape for IngredientLot
trace:IngredientLotShape
    a sh:NodeShape ;
    sh:targetClass trace:IngredientLot ;
    sh:property [
        sh:path trace:hasBatchID ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "batch ID" ;
        sh:description "A unique identifier for the ingredient lot" ;
    ] ;
    sh:property [
        sh:path trace:producedAt ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "production timestamp" ;
        sh:description "When the ingredient lot was produced" ;
    ] ;
    sh:property [
        sh:path prov:wasAttributedTo ;
        sh:minCount 1 ;
        sh:class trace:TraceAgent ;
        sh:name "attributed agent" ;
        sh:description "The agent responsible for producing the ingredient lot" ;
    ] .

# Shape for ProcessingActivity
trace:ProcessingActivityShape
    a sh:NodeShape ;
    sh:targetClass trace:ProcessingActivity ;
    sh:property [
        sh:path trace:recordedAt ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "recorded timestamp" ;
        sh:description "When the processing activity was recorded" ;
    ] ;
    sh:property [
        sh:path prov:wasAssociatedWith ;
        sh:minCount 1 ;
        sh:class trace:TraceAgent ;
        sh:name "associated agent" ;
        sh:description "The agent responsible for the processing activity" ;
    ] ;
    sh:property [
        sh:path prov:used ;
        sh:minCount 1 ;
        sh:class trace:TraceEntity ;
        sh:name "used entity" ;
        sh:description "The entity that was used in the processing activity" ;
    ] ;
    sh:property [
        sh:path prov:generated ;
        sh:minCount 1 ;
        sh:class trace:ProductBatch ;
        sh:name "generated batch" ;
        sh:description "The product batch generated by the processing activity" ;
    ] .

# Shape for TransportActivity
trace:TransportActivityShape
    a sh:NodeShape ;
    sh:targetClass trace:TransportActivity ;
    sh:property [
        sh:path trace:recordedAt ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "recorded timestamp" ;
        sh:description "When the transport activity was recorded" ;
    ] ;
    sh:property [
        sh:path prov:wasAssociatedWith ;
        sh:minCount 1 ;
        sh:class trace:TraceAgent ;
        sh:name "associated agent" ;
        sh:description "The agent responsible for the transport activity" ;
    ] ;
    sh:property [
        sh:path prov:used ;
        sh:minCount 1 ;
        sh:class trace:TraceEntity ;
        sh:name "transported entity" ;
        sh:description "The entity that was transported" ;
    ] ;
    sh:property [
        sh:path trace:hasCondition ;
        sh:maxCount 1 ;
        sh:class trace:EnvironmentalCondition ;
        sh:name "environmental condition" ;
        sh:description "Environmental conditions during transport" ;
    ] .

# Shape for QualityCheck
trace:QualityCheckShape
    a sh:NodeShape ;
    sh:targetClass trace:QualityCheck ;
    sh:property [
        sh:path trace:recordedAt ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "recorded timestamp" ;
        sh:description "When the quality check was recorded" ;
    ] ;
    sh:property [
        sh:path prov:wasAssociatedWith ;
        sh:minCount 1 ;
        sh:class trace:TraceAgent ;
        sh:name "associated agent" ;
        sh:description "The agent responsible for the quality check" ;
    ] ;
    sh:property [
        sh:path prov:used ;
        sh:minCount 1 ;
        sh:class trace:TraceEntity ;
        sh:name "checked entity" ;
        sh:description "The entity that was checked" ;
    ] .

# Shape for EnvironmentalCondition
trace:EnvironmentalConditionShape
    a sh:NodeShape ;
    sh:targetClass trace:EnvironmentalCondition ;
    sh:property [
        sh:path trace:hasTemperature ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:name "temperature" ;
        sh:description "Temperature in Celsius" ;
    ] ;
    sh:property [
        sh:path trace:hasHumidity ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:name "humidity" ;
        sh:description "Relative humidity in percent" ;
    ] ;
    sh:property [
        sh:path trace:hasConditionTimestamp ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:dateTime ;
        sh:name "condition timestamp" ;
        sh:description "When the environmental condition was recorded" ;
    ] .

# Shape for Farmer
trace:FarmerShape
    a sh:NodeShape ;
    sh:targetClass trace:Farmer ;
    sh:property [
        sh:path rdfs:label ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "label" ;
        sh:description "Name or label of the farmer" ;
    ] .

# Shape for Manufacturer
trace:ManufacturerShape
    a sh:NodeShape ;
    sh:targetClass trace:Manufacturer ;
    sh:property [
        sh:path rdfs:label ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "label" ;
        sh:description "Name or label of the manufacturer" ;
    ] .

# Shape for LogisticsProvider
trace:LogisticsProviderShape
    a sh:NodeShape ;
    sh:targetClass trace:LogisticsProvider ;
    sh:property [
        sh:path rdfs:label ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "label" ;
        sh:description "Name or label of the logistics provider" ;
    ] .

# Shape for Retailer
trace:RetailerShape
    a sh:NodeShape ;
    sh:targetClass trace:Retailer ;
    sh:property [
        sh:path rdfs:label ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "label" ;
        sh:description "Name or label of the retailer" ;
    ] .

# Shape for Customer
trace:CustomerShape
    a sh:NodeShape ;
    sh:targetClass trace:Customer ;
    sh:property [
        sh:path rdfs:label ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:name "label" ;
        sh:description "Name or label of the customer" ;
    ] .
